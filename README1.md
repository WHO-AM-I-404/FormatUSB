# FormatUSB v1.0.0.3 - Technical Documentation

## Overview

FormatUSB is a modern, user-friendly USB formatting tool with a compact and solid GUI. This project has been imported from GitHub and optimized for seamless operation.

## Recent Changes

### Version 1.0.0.3 (October 03, 2025)
- Minor updates and improvements
- Updated documentation with detailed installation guide
- Added comprehensive health check script (`check_formatusb.sh`)
- Improved README with troubleshooting section

### Version 1.0.0.2 (October 03, 2025)
- Removed license button from about dialog
- Embedded CHANGELOG into application resources (no longer depends on external file)
- Improved resource management and application portability

### Version 1.0.0.1 (September 25, 2025)
- Initial release after fork
- Project successfully imported and all compilation errors fixed
- Updated copyright to FormatUSB Team
- Enhanced USB detection with multiple detection methods
- Improved GUI with modern styling and compact design

## User Preferences

- **Copyright**: Must use "FormatUSB Team"
- **GUI Style**: Compact and solid with modern styling
- **Version**: Consistently use v1.0.0.3 across all files
- **Build**: Uses Qt5 with C++20 standard
- **Resources**: CHANGELOG embedded as internal resource

## Project Architecture

### Technology Stack

- **Framework**: Qt5 (Widgets, Core, GUI)
- **Language**: C++20
- **Build System**: qmake + make
- **Platform**: Cross-platform (Linux focused)

### Key Files Structure

```
├── main.cpp           # Entry point with Qt application setup
├── mainwindow.cpp     # Main UI logic with enhanced USB detection
├── mainwindow.h       # Header with class declarations
├── mainwindow.ui      # UI layout (650x280 compact design)
├── cmd.cpp            # Command execution wrapper
├── cmd.h              # Command class header
├── about.cpp          # About dialog
├── about.h            # About header
├── version.h          # Version definitions (1.0.0.3)
├── images.qrc         # Resource file
└── Makefile           # Generated by qmake
```

### Key Features

#### 1. Enhanced USB Detection
- Multiple detection methods (lsblk, udevadm, /sys/block)
- Real-time device filtering
- System drive protection
- Removable device verification

#### 2. Modern GUI
- Compact 600x285 window size
- Modern styling with blue accents
- Emoji icons for better UX
- Responsive design

#### 3. Format Support
- FAT32, exFAT, NTFS, ext4
- Partition table options (GPT, MSDOS)
- Volume label validation
- Progress monitoring

#### 4. Safety Features
- Confirmation dialogs
- System drive protection
- Process monitoring
- Error handling

### Build Instructions

```bash
# Clean and build
qmake src.pro
make clean && make

# Run application
./formatusb

# Check version
./formatusb --version
```

### Dependencies

**Build Dependencies:**
- Qt5 (qtbase, widgets, core, gui) >= 5.9
- C++ compiler (gcc/g++) with C++20 support
- qmake
- pkg-config
- make

**Runtime Dependencies:**
- X11 or Wayland display server
- Root privileges (for formatting operations)
- System utilities: parted, lsblk, udevadm

**Filesystem Tools (as needed):**
- dosfstools (for FAT32)
- ntfs-3g (for NTFS)
- e2fsprogs (for ext4)
- exfatprogs or exfat-utils (for exFAT)

## Installation

### Install Build Dependencies

```bash
# Ubuntu/Debian/Linux Mint
sudo apt update
sudo apt install -y build-essential qtbase5-dev qtchooser \
    qt5-qmake qtbase5-dev-tools pkg-config

# Install system utilities
sudo apt install -y parted dosfstools ntfs-3g e2fsprogs

# For modern systems (Ubuntu 20.04+, Debian 11+)
sudo apt install -y exfatprogs

# For older systems
sudo apt install -y exfat-fuse exfat-utils
```

### Build from Source

```bash
# Clone the repository
git clone https://github.com/WHO-AM-I-404/FormatUSB.git
cd FormatUSB

# Generate Makefile
qmake src.pro

# Compile
make -j$(nproc)

# The executable 'formatusb' will be created
```

### System-Wide Installation (Optional)

```bash
# Copy binary to system path
sudo cp formatusb /usr/local/bin/

# Copy library
sudo mkdir -p /usr/lib/formatusb
sudo cp lib/formatusb_lib /usr/lib/formatusb/
sudo chmod +x /usr/lib/formatusb/formatusb_lib

# Create desktop entry
sudo tee /usr/share/applications/formatusb.desktop << 'EOF'
[Desktop Entry]
Name=FormatUSB
GenericName=USB Formatter
Comment=Format USB drives and removable storage devices
Exec=formatusb
Icon=drive-removable-media-usb
Terminal=false
Type=Application
Categories=System;Utility;
Keywords=USB;format;drive;storage;disk;
EOF

# Update desktop database
sudo update-desktop-database
```

## Usage

### Running the Application

```bash
# From source directory
./formatusb

# If installed system-wide
formatusb

# With root privileges (for formatting)
sudo formatusb
```

### Formatting Workflow

1. **Select Device**: Choose your USB device from the dropdown
2. **Choose Filesystem**: Select FAT32, NTFS, ext4, or exFAT
3. **Set Options**: Choose partition table (Defaults, MBR, or GPT)
4. **Volume Label**: Enter a custom name for your drive
5. **Format**: Click "Next" and confirm the operation

### Safety Options

- ☑️ **Show all devices**: Display all storage (⚠️ **Use with caution!**)
- ☑️ **Show partitions**: Display individual partitions

## Health Check

Run the health check script to verify project integrity:

```bash
bash check_formatusb.sh
```

Expected output:
```
═══════════════════════════════════════════════════════════
  Summary
═══════════════════════════════════════════════════════════
  Total checks: 47
  Passed: 47
  Warnings: 0
  Failed: 0

✓ FormatUSB is in excellent condition!
```

## Technical Details

### Resource Management

- **Embedded Resources**: CHANGELOG and images bundled in binary via Qt Resource System
- **No External Dependencies**: All assets compiled into executable
- **Improved Portability**: Single executable with embedded resources

### Internationalization

- 50+ translation files in `translations/` directory
- Support for major world languages
- Qt Translation System (.ts files)

### Security Features

- System drive detection and protection
- Multiple confirmation dialogs before destructive operations
- Process monitoring and error handling
- Comprehensive logging to `/tmp/formatusb.log`

## Development

### Coding Standards

- Follow Qt coding conventions
- Use modern C++20 features
- Ensure cross-platform compatibility
- Add proper error handling
- Document complex functions
- Test on multiple Linux distributions

### Testing Checklist

- [ ] Build succeeds without errors
- [ ] Health check script passes 100%
- [ ] Version numbers consistent across all files
- [ ] Executable runs without crashes
- [ ] USB detection works correctly
- [ ] Formatting works for all filesystem types
- [ ] About dialog displays changelog
- [ ] No segfaults or memory leaks

## Copyright & License

```
FormatUSB - USB Drive Formatting Tool
Copyright (C) 2025 FormatUSB Team

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.
```

Licensed under GPL v3 or later. See [LICENSE](LICENSE) file for details.

## Development Notes

- Project imported from GitHub with cleaner structure
- All compilation errors fixed (77+ errors resolved)
- Enhanced USB detection using multiple methods
- Modern styling with CSS-like properties
- Compact window design for better usability
- Embedded resources for improved portability

## Credits

### Development Team
- **WHO-AM-I-404** - Lead Developer & Project Maintainer
- **FormatUSB Team** - Contributors

### Original Project
- **MX Linux Team** - Original FormatUSB implementation
- **James Bowlin (BitJam)** - live-usb-maker utilities

### Frameworks
- **Qt Framework** - Excellent GUI toolkit
- **GNU Project** - Core utilities

## Support

- **GitHub**: [https://github.com/WHO-AM-I-404/FormatUSB](https://github.com/WHO-AM-I-404/FormatUSB)
- **Issues**: [GitHub Issues](https://github.com/WHO-AM-I-404/FormatUSB/issues)
- **Email**: formatusb1122@gmail.com

---

**Made with ❤️ for the Linux community**
